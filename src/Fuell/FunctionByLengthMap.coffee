exports.func = 
func = (template) ->
  -> 
    ln0 = arguments.length.toString()
    return f.apply this, arguments for ln, f of template when ln == ln0
    throw "Function does not support #{arguments.length} arguments"